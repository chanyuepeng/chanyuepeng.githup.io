(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21006a"],{b5ab:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),n("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),n("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},i=[],r=(n("a256"),n("b782"),n("9afd"),n("0aef"),n("c27c"),n("3af6"),{name:"roleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;this.$API.permission.toAssign(e).then((function(e){var n=e.data.children;t.allPermissions=n;var s=t.getCheckedIds(n);t.$refs.tree.setCheckedKeys(s)}))},getCheckedIds:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,s){return s.select&&4===s.level?e.push(s.id):s.children&&t.getCheckedIds(s.children,n),e}),n)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,this.$API.permission.doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var n=e.$route.query.roleName,s=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),s.includes(n)&&window.location.reload()}))}))}}}),a=r,o=n("cba8"),l=Object(o["a"])(a,s,i,!1,null,null,null);t["default"]=l.exports}}]);